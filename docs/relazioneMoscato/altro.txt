\documentclass{article}
\title{Relazione esame System Safety Engineering}
\author{
    Gruppo 02 \\
    Antonio Vitale \\
    Federico Memoli \\
    Antonio Caso\\
}
\usepackage{parskip}
\usepackage{enumerate}
\usepackage{longtable}
\usepackage{amsmath}
\usepackage[table]{xcolor}
\usepackage{tabularx}

%\usepackage[margin=3cm]{geometry}
\usepackage{microtype}
\usepackage{xcolor}
\newcommand*{\red}[1]{\textcolor{red}{#1}}
\newcommand*{\green}[1]{\textcolor{green}{#1}}
\newcommand*{\yellow}[1]{\textcolor{yellow}{#1}}
\newcommand*{\bold}{\textbf}
\usepackage{listings}
\setlength{\arrayrulewidth}{0.5mm}
\setlength{\tabcolsep}{18pt}
\renewcommand{\arraystretch}{1.5}
%\usepackage{imakeidx}
\usepackage{float}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{tcolorbox}

%------------------------------------------------------------------


\usepackage{enumitem}
\usepackage{pdfpages}
\usepackage{setspace}
\renewcommand{\arraystretch}{1.5}

\setlength{\arrayrulewidth}{0.5mm}
\setlength{\tabcolsep}{18pt}
\newcounter{mybox}

\lstset{
mathescape,
basicstyle=\ttfamily,
basewidth=0.5em,
extendedchars=\true,
inputencoding=utf8
}

%------------------------------------------------------------------



\newcommand{\infin}{\infty}
\newcommand{\mybox}[2]{%
  \refstepcounter{mybox}%
  \begin{tcolorbox}[title={\themybox . #1},colback=white]
    #2
  \end{tcolorbox}
}

%\begin{document}
%\maketitle
%\vspace{-2cm}
%\begin{center}
%\end{center}
%\pagebreak
%\tableofcontents
%\pagebreak


\begin{document}
%\maketitle
\input{frontespizio.tex}
\tableofcontents
\newpage
\section{Stochatical methods for steady-state availability analysis}
  \subsection{Disponibilità stazionaria}
    \subsubsection{Disponibilità}
      L'availability è la misura della capacità di svolgere una specifica funzione quando necessario, in determinate circostanze, sia in un preciso momento sia dopo un periodo di tempo sufficientemente lungo, indipendentemente dal numero di guasti e riparazioni che possono verificarsi nel frattempo.

      Prima di definire la disponibilità stazionaria bisogna definire i concetti di tempo medio di fallimento (mean time to failure - MTTF) e di tempo medio di riparazione (mean time to repair - MTTR).
    \subsubsection{MTTF}
      Il tempo medio di fallimento (MTTF) è sinonimo di tempo medio di vita di un dispositivo. Rappresenta un indice sintetico ed immediato nel definire con un unico valore la capacità di un dispositivo di funzionare. Nel mondo pratico risulta desiderabile che questo valore sia il più alto possibile. Data la sua sinteticità, risulta un parametro molto immediato da analizzare, ma presenta un contenuto informativo inferiore rispetto a funzioni come quella di reliability R(x) e unreliability F(x).

      Dalla definizione del valore atteso di una variabile casuale, applicato al caso di una variabile casuale non negativa X che rappresenta il tempo di vita di un dispositivo, otteniamo il tempo medio di vita o il tempo medio di failure (MTTF)
      
      Il calcolo del tempo medio di vita, e di conseguenza del tempo medio di fallimento (MTTF), si ottiene riprendendo il concetto di valore atteso di una variabile casuale non negativa X che rappresenta il tempo di vita di un dispositivo:

      $$average \ lifetime=MTTF= E[X]=\int_0^\infty{xf(x)dx}$$
      Integrando per parti:
      $$\int_0^\infty{xf(x)dx}=-\int_0^\infty{xdR(x)}=[-xR(x)]_0^\infty+\int_0^\infty{R(x)dx}$$
      e ricordando che la la reliability R(x) ad infinito vale 0 e che un numero moltiplicato per 0 fa sempre 0, otteniamo che il tempo di vita medio e MTTF sono uguali all’integrale da 0 ad infinito sulla funzione di reliability:
      $$average \ lifetime=MTTF= \int_0^\infty{R(x)dx}$$
      Ovvero l’area sottesa dalla curva R(x). Ciò significa anche che due dispositivi con due funzioni di reliability diverse possono avere lo stesso MTTF. Esso quindi rappresenta il tempo medio di un dispositivo prima che si danneggi.
  
    \subsubsection{MTTR}
      Un’unità riparabile è caratterizzata da tempi di funzionamento $X_i$ e tempi di inattività $Y_i$, dove , $X_i$ indica il tempo trascorso tra l'(i-1)-esima riparazione e la i-esima rottura, mentre Y$_i$ indica il tempo trascorso tra la i-esima rottura e la i-esima riparazione. Per una trattabilità del problema, i tempi di funzionamento e di inattività sono considerati indipendenti e identicamente distribuiti (i.i.d) con una rispettiva Cdf comune $F_X(t)$ e $G_Y(t)$. Quest’ultima è una misura della manutenibilità, e la sua derivata rappresenta la densità di probabilità dei tempi di riparazione $g_Y(t)=dG_Y(t)/dt$.

      \red{Spiegare meglio cosa è la manutenibilità, la sua dimostrazione, e cosa si intende per densità di probabilità dei tempi di riparazione.}

      Il tempo medio di riparazione (MTTR) è rappresentato dal valore medio di Y:
      $$MTTR= E[Y]=\int_0^\infty{tg_Y(t)dt}=\int_0^\infty{(1-G_Y(t))dt}$$
      Esso quindi rappresenta il tempo medio per la riparazione di un dispositivo.

    \subsubsection{MTBF}
      Conoscendo MTTF e MTTR, è possibile definire il valore atteso della variabile casuale di inter-rinnovo Z, ovvero il tempo medio tra guasti (mean time between failures - MTBF):

      \green{Quando si introduce qualcosa di nuovo, spendere due righe per chiarire il concetto a livello puramente semantico come fatto in questo caso.}

      $$MTFB=E[Z]=E[X]+E[Y]=MTTF+MTTR$$
      Esso quindi rappresenta il tempo medio tra due danneggiamenti del dispositivo.

    \subsubsection{Disponibilità istantanea}
      L’\textit{availability} di un dispositivo (detto anche \textbf{sistema}) può essere calcolata per ogni istante di tempo t; da ciò si ottiene l’\textbf{availability istantanea}:

      $$A(t)=Pr(\text{system is working at time t})$$

      \red{Ok e quindi? Come la calcolo? E che me ne faccio? Si certo viene usata subito dopo, però io che ne so leggendo fino a qua}

    \subsubsection{Disponibilità stazionaria}
      La \textit{\textbf{steady-state availability}} (\textbf{disponibilità stazionaria}) $A_{SS}$ si definisce come il limite del tempo t che tende all’infinito rispetto della disponibilità istantanea:
      $$A_{SS}=\lim_{t\rightarrow\infin}A(t)$$

      Inoltre è dimostrabile che la steady-state availability è uguale a:
      $$A_{SS}=\frac{MTTF}{MTTF+MTTR}=\frac{MTTF}{MTBF}$$

      Da ciò ne consegue che per aumentare la disponibilità stazionaria di un sistema, non potendo andare a modificare i tempi medi di fallimento, è necessario andare a diminuire i tempi medi delle riparazioni.

  \subsection{Analisi di affidabilità}
    \subsubsection{Introduzione}
      Il sistema viene modellato come una \textbf{scatola nera} avente due possibili condizioni di funzionamento, ovvero la \textbf{condizione di funzionamento e di guasto}. Questo approccio non è basato sugli stati.

      \red{Quale approccio? Non si è ancora parlato di nessun approccio, la parola approccio non è ancora mai comparsa. E se non su quello, su cosa allora?}

      Il sistema deve essere \textbf{decomposto} in parti che interagiscono tra di loro; la scelta  del \textbf{grado di complessità} della decomposizione delle parti, ovvero decidere se decomporre a livello di sottosistema o a livello di componente elementare, è fatta dall’analista in base al grado di approfondimento che vuole raggiungere. Dopo tale decomposizione, viene descritta la \textbf{struttura logica} del sistema, ovvero il legame tra lo stato delle parti e quello del sistema.

      \green{Bellissimo questo paragrafo, top, gg allo scrittore}

    \subsubsection{Reliability block diagram (RBD)}
      Per sistemi \textbf{monotoni}, ovvero sistemi in cui:

      \begin{itemize}
        \item Ogni parte costituente del sistema può trovarsi in soli due stati: "\textbf{funzionante}" o "\textbf{guasto}".
        \item Il \textbf{sistema stesso} può trovarsi in \textbf{soli due stati}: "funzionante" o "guasto".
        \item Il sistema funziona certamente se \textbf{ogni sua parte funziona}.
        \item Il sistema è certamente guasto se \textbf{ogni sua parte è guasta}.
      \end{itemize}
    
      è possibile creare il \textbf{diagramma a blocchi di affidabilità} (\textbf{Reliability Block Diagram - RBD}) del sistema. Si assume che ogni componente gode di \textbf{indipendenza \red{statistica} \green{STOCASTICA}}. Il diagramma logico è composto dalle varie componenti del sistema (blocchi) collegati tra di loro, dove si assume la convenzione che un blocco funzionante permettA(!) il passaggio di corrente attraverso di esso (interruttore chiuso), cosa non possibile per un blocco guasto (interruttore aperto). La struttura del grafico quindi è composta da interruttori che in certe combinazioni di guasti causano il guasto complessivo del sistema. 

      \red{Signori, usiamo il congiuntivo e non l'indicativo! PermettA, non permettE!}

    
      Un sistema ha una struttura logica di tipo \textbf{serie se funziona solo se tutte le sue parti funzionano}. Considerando due blocchi in serie A e B:

      \begin{figure}[h]
        \centering
        \includegraphics[width=0.6\linewidth]{./images/series.png}
        \caption{Esempio di serie.}
      \end{figure}

      Il passaggio di corrente tra le due estremità della rete è garantito solo se \textbf{entrambi gli elementi funzionan}o. Per avere l’evento di corretto funzionamento del sistema in un intervallo di tempo fisso (0, t), indicato con S, è dato dall'\textbf{intersezione degli eventi A e B} che sono gli eventi di corretto funzionamento delle sue parti A e B (\textbf{nello stesso intervallo di tempo}):
      $$S=A\cap B$$
      L'evento fallimento del sistema $\bar{S}$ si ottiene tramite la legge di De Morgan:
      $$\bar S=\bar A\cup \bar B$$
      La probabilità di occorrenza di S nell’intervallo (0,t) risulterà (valendo la stocastica indipendenza):
      $$Pr(S)=Pr(A\cap B)=Pr(A)Pr(B)$$
      Essendo S ed $\bar S$ mutuamente esclusivi:
      $$Pr(\bar S)=1-Pr(S)$$
      Un sistema ha una struttura logica di tipo parallelo se funziona solo se almeno una delle sue parti funziona. Tale sistema genera ridondanza. Considerando due blocchi in parallelo A e B:

      \begin{figure}[h]
        \centering
        \includegraphics[width=0.6\linewidth]{./images/parallel.png}
        \caption{Esempio di parallelo.}
      \end{figure}

      Il passaggio di corrente tra le due estremità della rete è garantito se \textbf{almeno uno degli elementi funziona}. Per avere l’evento di corretto funzionamento del sistema in un intervallo di tempo fisso (0, t), indicato con S, è l'\textbf{intersezione degli eventi A e B} che sono gli eventi di corretto funzionamento delle sue parti A e B (nello stesso intervallo di tempo):
      $$S=A\cup B$$
      L'evento fallimento del sistema $\bar{S}$ si ottiene tramite la legge di De Morgan:
      $$\bar S=\bar A\cap \bar B$$
      La probabilità di occorrenza di S nell’intervallo (0,t) risulterà (valendo la stocastica indipendenza):
      $$Pr(S)=Pr(A\cup B)=Pr(A)+Pr(B)-Pr(A)Pr(B)$$
      Essendo S ed $\bar S$ mutuamente esclusivi:
      $$Pr(\bar S)=1-Pr(S)$$
      Molto spesso si uniscono sistemi serie e parallelo per rappresentare strutture più complesse, tali sistemi si chiamano serie-parallelo.
      \begin{figure}[h]
        \centering
        \includegraphics[width=0.8\linewidth]{./images/mistiRBD.png}
        \caption{Esempio di architetture miste.}
      \end{figure}
      Esistono altri tipi di strutture ridondanti oltre a quella parallela:

      \begin{itemize}
        \item \textbf{k-out-of-N redundancy}:il sistema è composto da N elementi in parallelo, affinché funzioni, almeno un numero fisso k ($1<k\le N$) di elementi deve essere funzionante.
        \item \textbf{Standby Redundancy}: si mette in funzione un’unità del sistema e si mantiene un'altra unità di riserva, in grado di svolgere la stessa funzione, in condizione di standby. Quest'ultima unità entra in azione solo quando la prima fallisce. Viene molto spesso utilizzata quanto la struttura parallela non è realizzabile o eccessivamente costosa.
      \end{itemize}

      \textbf{È dimostrabile che risulta più affidabile un sistema con componenti in ridondanza rispetto a ridondare l’intero sistema}. 

      Si consideri un sistema composto da due componenti in serie A e B (figura a), con rispettive affidabilità $R_A\text{ e }R_B$:
      \begin{figure}[h]
        \centering
        \includegraphics[width=0.6\linewidth]{./images/RBDind1.png}
        \caption{Affidabilità per una serie.}
      \end{figure}

      Poichè è un sistema serie, risulta banale calcolarne l’\textbf{affidabilità}:
      $$R_a=R_AR_B$$
      Avendo disponibile una sola replica di ogni componente, è possibile produrre una \textbf{ridondanza di sistema o di componente}. Quella di sistema, ovvero di tutto l'elemento parallelo, è mostrata di seguito:
      \begin{figure}[h]
        \centering
        \includegraphics[width=0.4\linewidth]{./images/RBDind2.png}
        \caption{Ridondanza di sistema.}
      \end{figure}
      L’affidabilità di questo sistema si può calcolare come il parallelo di due sistemi serie AB:
      $$R_b=2R_AR_B-(R_AR_B)^2=R_AR_B(2-R_AR_B)$$
      Come si può notare, $R_b>R_a$.

      \newpage
      La \textbf{ridondanza di sistema} è mostrata in figura c, con affidabilità $R_c$.
      \begin{figure}[h]
        \centering
        \includegraphics[width=0.4\linewidth]{./images/RBDind3.png}
        \caption{Altro esempio di ridondanza di sistema.}
      \end{figure}

      L’affidabilità di questo sistema si può calcolare come la serie di due sistemi parallelo AA’ e BB’:
      $$R_c=(2R_A-R_A^2)(2R_B-R_B^2)=R_AR_B[4-2(R_A+R_B)+R_AR_B]$$
      Come si può notare, $R_c>R_a$.

      Volendo, con spirito inquisitorio, eseguire il rapporto tra le affidabilità della ridondanza di componente e quella di sistema, si avrà:
      $$\frac{R_c}{R_b}=\frac{4-2(R_A+R_B)+R_AR_B}{2-R_AR_B}=1+\frac{2(1-R_A)(1-R_B)}{2-R_AR_B}>1$$
      Da ciò consegue che l’\textbf{affidabilità risulta maggiore a livello di ridondanza di componente rispetto a quella di sistema}.
      Bisogna però notare che tale ridondanza è più complessa poichè, in questo caso, \textbf{ogni componente di tipo A deve essere collegato ad ogni componente di tipo B}; 
      
      
      questo potrebbe richiedere della logica di controllo non considerata nei calcoli che potrebbero ridurre i vantaggi di questa configurazione. 

      \red{Spiegare meglio questa frase, detta così vuol dire che fare due conti in più è un problema, ma come sappiamo per Postiglione più calcoli inutili ci sono e meglio è}

      Quando le strutture logiche non sono più rappresentabili tramite sistemi serie-parallelo, non si può più applicare la condizione di monotonicità. 
      
      \red{E perchè? Ok che è vero, certo, però è bene non lasciare le cose per sottointese}
      
      Per gestire queste strutture più complesse sono nate diverse metodologie, due di questo sono quella della \textbf{probabilità condizionata} e quella della \textbf{Fault Tree Analysis} (FTA). 

      \newpage
    \subsubsection{Probabilità condizionata}
      Tale metodo si basa sul seguente teorema:

      \textbf{Legge della probabilità totale}: \textit{Siano $A_1$, $A_2$, ..., $A_N$ eventi esclusivi ed esaustivi dello spazio delle probabilità omega, e sia S un evento di omega. La probabilità dell'evento S può essere espressa come:}

      $$Pr(S)Pr(S|A_1)Pr(A_1)+...+Pr(S|A_N)Pr(A_N)$$

      Tale teorema permette di \textbf{scomporre un evento S in diversi eventi più semplici}, tali da essere risolvibili tramite sistemi serie-parallelo.

      \begin{figure}[h]
        \centering
        \includegraphics[width=0.8\linewidth]{./images/probTot.png}
        \caption{Esempio di probabilità totale.}
      \end{figure}

    \subsubsection{Fault Tree Analysis (FTA)}
      Il \textbf{Fault Tree} è una tecnica grafica per l’analisi dell’\textbf{affidabilità} e della sicurezza di sistemi. 
      
      Il punto di partenza dell’albero è la condizione di questo, 

      \red{Senso incomprensibile lol}
      
      chiamata \textbf{Top Event}, essa poi viene \textbf{scomposta in combinazioni} o sequenze di eventi che possono averla causata. La procedure si ferma quando l’evento non è più decomponibile.
      La decomposizione avviene attraverso due simboli grafici che rappresentano le relazioni logiche di \textbf{AND e OR}. Nel primo caso, sta ad indicare che deve avvenire l’occorrenza \textbf{simultanea} degli eventi, nel secondo invece dell’\textbf{occorrenza} di uno solo degli eventi.

      \begin{figure}[h]
        \centering
        \includegraphics[width=0.8\linewidth]{./images/fta.png}
        \caption{Elementi fondamentali del fault tree.}
      \end{figure}

      Tale metodologia permette di identificare le cause di origine del Top Event e di effettuare valutazioni qualitative della probabilità di occorrenza.

    \subsubsection{Pro}
      \begin{itemize}
        \item \textbf{Struttura chiara}: il RBD offre una rappresentazione visiva chiara e semplice della struttura del sistema.
        \item \textbf{Individuazione agevole}: il RBD permette di individuare chiaramente l’elemento meno affidabile.
        \item \textbf{Analisi retrospettiva}: il Fault Tree identifica efficacemente le possibili cause di guasto.
        \item \textbf{Analisi qualitativa e quantitativa}: il Fault Tree fornisce un’analisi sia qualitativa che quantitativa delle cause di guasto.
        \item \textbf{Flessibilità}: la probabilità condizionata permette di modellare scenari più complessi rispetto ai semplici schemi serie-parallelo degli RBD, fornendo una valutazione più realistica.
      \end{itemize}

    \subsubsection{Contro}
      \begin{itemize}
        \item \textbf{Eccessiva semplificazione}: il RBD rappresenta sistemi semplici, assumendo che i guasti siano indipendenti. Viene utilizzato per componenti semplici, risulta inadeguanto per componenti più complessi. 
        \item \textbf{Complessità rappresentativa}: il Fault Tree può risultare molto oneroso se applicato dettagliatamente, invece di considerare gli eventi più rappresentativi.
        \item \textbf{Complessità comparativa}: il Fault Tree rende difficile catturare cause comuni di fallimento, [...]
        \item \textbf{Irreversibilità dei guasti}: queste tecniche sono utilizzate in caso le componenti del sottosistema da modellare sono non-riparabili, ovvero se possono trovarsi solo in 2 stati, funzionante o guasto.
      \end{itemize}

      \red{Dare un accenno di spiegazione sulla complessità comparativa, continuando la frase con ", ovvero"}

  \subsection{Catene Markoviane}
    Le catene Markoviane sono utilizzate per modellare transizioni di stato in sistemi dinamici dove i tempi di riparazione non sono trascurabili. Questi modelli sono cruciali per valutare la disponibilità stazionaria attraverso le probabilità di transizione tra gli stati.

    \subsubsection{DTMC}
    \subsubsection{DTMC}
    Sono casi speciali di processi Markoviani in tempo discreto e numero di stati numerabile (DTMC). Un processo Markoviano è un processo stocastico che soddisfa la proprietà di Markov:
    $$Pr\{X(t_{n+1})=j|X(t_{n})=i, H(t_{n-1})\}=Pr\{X(t_{n+1})=j|X(t_{n})=i)\}=p_{i,j}(t_n)$$
    Ovvero la probabilità di passare dallo stato $i$ allo stato $j$ è data \textbf{solo dalla probabilità di trovarsi nello stato $i$ e dalla probabilità della transizione da $i$ a $j$} e non dalla storia di transizioni passate che hanno portato ad $i$. Quindi un processo di Markov è memoryless, senza memoria, questo rende molto semplice l’analisi dell’affidabilità del sistema perché bisogna occuparsi solo di due cose:

    \green{Ottima idea spiegare le formule in questo modo, facendo vedere che non le si ricopia e basta ma che si è capito il senso dietro.}
    \begin{itemize}
      \item probabilità di stare nello stato i 
      \item la probabilità di transizione allo stato $j$ partendo da $i$. 
    \end{itemize}
    In un processo di Markov il \textbf{futuro è condizionatamente indipendente dal passato dato il presente}. Un’ulteriore semplificazione che si può avere è se le probabilità di transizione sono costanti nel tempo, perdendo dunque la dipendenza da quest'ultimo:
    $$Pr\{X(t_{n+1})=j|X(t_{n})=i\}=p_{i,j}$$
    In questo caso il processo è chiamato catena di Markov omogenea e rappresenta il modello probabilistico più semplice per un sistema riparabile con tempi di riparazione non trascurabili.

    Una catena di Markov omogenea è completamente definita dalla cosiddetta matrice di transizione P, che \textbf{raccoglie tutte le probabilità di transizione} dallo stato $i$ (identificato dall'indice di riga) allo stato $j$ (identificato dall'indice di colonna). P è una matrice quadrata con elementi non negativi ed è una matrice stocastica, ovvero la somma dei termini di ogni riga è uguale a 1.

    \green{Questi "ovvero" per spiegare tutti i fatti sono proprio al bacio, veramente top, spiegano appena si presenta il dubbio}

    La matrice di transizione \textbf{P se moltiplicata per se stessa un numero $n$ di volte va a definire la matrice con le probabilità di stato} al tempo $t_n$.

    Questo implica che la relazione tra le probabilità al tempo $t_n$ e $t_{n+1}$ (in caso di processo a due stati) è:

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.8\linewidth]{./images/mat1.png}
      \caption{???.}
    \end{figure}

    \red{Bisogna spiegare l'equazione nel senso di spiegare prima i vari elementi che la compongono e poi spiegare cosa vuol dire tutta insieme. Ok, si, non ci vuole molto a capire cosa vuol dire e certamente postiglione lo sa perfettamente cosa è, però cmq è una formula lanciata senza un contesto. Oltretutto noi poco sopra abbiamo detto che la matrice di transizione "MOLTIPLICATA PER SE STESSA" quindi questo "se stesso" si dovrebbe mettere in evidenza}

    Questa relazione vale in ogni istante, quindi anche per lo steady state (ovvero all'infinito), infatti si avrà:

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.8\linewidth]{./images/mat2.png}
      \caption{???.}
    \end{figure}

    In questo sistema, una delle equazioni è linearmente dipendente dall’altra ma può essere rimpiazzata dall’equazione di vincolo tra probabilità di stato $P_1(t_n)+P_2(t_n)=1$, che deve valere per ogni $t_n$.

    Si possono anche analizzare i \textbf{tempi di soggiorno} del sistema in uno stato, ovvero \textbf{il tempo che passa il sistema dall’entrata all’uscita di uno stato}; i tempi di soggiorno sono variabili aleatorie Geometriche, T~Geo(p), con media $1/p$ e varianza $(1-p)/p^2$, dove p è la probabilità di transizione in un altro stato. Ad esempio nel caso di 2 stati (funzionante e guasto), si avrà:
    
    \red{Vogliamo metterle le dimostrazioni per le Geometriche? Credo gli farebbe piacere vedere che uno si prende gli appunti di quello che dice, gli piace quando gli si alliscia il pelo}

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.8\linewidth]{./images/geo1.png}
      \caption{Esempio di descrizione di due tempi di transizione come due variabili geometriche.}
    \end{figure}

  \subsubsection{CTMC}
    Le assunzioni e relazioni fatte per il tempo discreto valgono anche se si considera un intervallo di tempo infinitesimale $dt$, rendendo quindi il tempo continuo: si ottengono così le CTMC.

    \red{Cosa vuol dire "rendere il tempo continuo"? Una roba tipo Dr Strange? Spiegare meglio il contesto "temporale" delle catene markoviane.}

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.8\linewidth]{./images/ctmc1.png}
      \caption{Probabilità di transire in un certo stato dato lo stato attuale.}
    \end{figure}

    \red{Introdurre prima i tassi di transizione. Spiegarli "a parole" prima anche. Spiegare come si passa, matematicamente e algebricamente, dalla prima riga alla seconda. Dopo averlo fatto, spiegare il senso semantico delle due equazioni.}

    I tassi di transizione $q_{i,j}$ sono:

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.8\linewidth]{./images/ctmc2.png}
      \caption{Definizione del tasso di transizione.}
    \end{figure}


    Se i tassi di transizione sono costanti nel tempo (ipotesi di \textbf{stazionarietà}), la CTMC è una CTMC \textbf{omogenea}, simile alla DTMC che abbiamo studiato in precedenza.\red{Abbiamo chi? Postiglione mentre legge fa parte delle persone che hanno studiato? E in precedenza quando? Evitare sempre qualsiasi persona verbale e lasciare il più possibile sull'impersonale.} Nel caso di sistemi a due stati (funzionante, stato 1, e guasto, stato 2) ci sono solo \red{2} \green{due} tassi di transizione:

    \red{Evitare di usare "2" un attimo prima e "due" dopo}

    \begin{itemize}
      \item $\lambda$ è il tasso di guasto, rappresentato dall’arco che va dallo stato 1 allo stato 2, $q_{12}$
      \item $\mu$ è il tasso di riparazione, rappresentato dall’arco che va dallo stato 2 allo stato 1, $q_{21}$
    \end{itemize}

    Mentre la probabilità di restare nello stato corrente è il complementare del tasso relativo all’arco uscente da quello stato.
    
    \red{Questa frase non ha senso in italiano... e tra l'altro mentre quello, che cosa?}

    La matrice di transizione, in caso di due stati, diventa:

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.6\linewidth]{./images/ctmc3.png}
      \caption{Matrice di transizione nel caso di CTMC omogenea.}
    \end{figure}

    \red{Siccome questa matrice qua è molto importante, consiglierei di RI-spiegare i suoi elementi e spiegarla nel complesso, del tipo perchè ci sta 1-? Si certo chiaramente noi lo sappiamo perché e non c'è bisogno dello scienziato per capirlo, è vero, e certamente non serve a postiglione capire questa cosa, però almeno per esperienza personale postiglione apprezza molto questo tipo di spiegazioni, e se non mi credete chiedete a Miriam come gli disse postiglione in merito alla relazione che facemmo. Però chiaramente in ogni caso se non avete voglia e vi scocciate lasciate così eh figuratevi, fate vobis voi sapete è il vostro lavoro non mi permetto di modificarlo io}

    Il sistema corrispondente alla CTMC modellata è rappresentabile come segue:

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.6\linewidth]{./images/ctmc4.png}
      \caption{Rappresentazione di una catena a due stati.}
    \end{figure}

    Applicando le corrispondenti equazioni nel tempo continuo similmente a come è stato fatto nel tempo discreto per il calcolo delle probabilità di essere in un dato stato $i$ al tempo $t$ si ha il seguente sistema:

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.9\linewidth]{./images/ctmc5.png}
      \caption{Rappresentazione di una catena a due stati.}
    \end{figure}

    che genera un \textbf{sistema di equazioni differenziali che hanno le seguenti soluzioni}, utilizzando la trasformata di Laplace e date le condizioni iniziali ($P_1(0)=1$ e $P_2(0)=0$) 

    \red{Anche qua, se ci sono i passaggi matematici è meglio metterli, soprattutto coi sistemi postigline esce pazzo}

    $$P_1(t)=\frac{\mu}{\lambda+\mu}+\frac{\lambda}{\lambda+\mu}\exp[-(\lambda+\mu)t]$$
    $$P_2(t)=\frac{\lambda}{\lambda+\mu}-\frac{\lambda}{\lambda+\mu}\exp[-(\lambda+\mu)t]$$

    Come si può notare, hanno una parte esponenziale che per \textbf{t infinito tende a 0, rendendo la probabilità steady state dipendente solo da $\lambda$ e $\mu$}.

    $$P_1(\infty)=\frac{\mu}{\lambda+\mu}$$
    $$P_2(\infty)=\frac{\lambda}{\lambda+\mu}$$
    La \textbf{distribuzione limite} \red{spiegare cosa è in quanto prima non la si è chiamata così} di una CTMC può essere calcolata in modo simile a come si farebbe per una DTMC, usando il seguente sistema di equazioni lineari e sostituendo un’equazione con la proprietà fondamentale della probabilità (la somma deve essere 1).

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.9\linewidth]{./images/ctmc6.png}
      \caption{Distribuzione limite nel caso CTMC.}
    \end{figure}

    Questa procedura è utilizzabile anche in caso di un \textbf{sistema a più stati} (MSS), perché evita di risolvere un sistema di equazioni differenziali con tante equazioni quanti sono gli stati, ma si ha piuttosto un sistema di equazioni lineari.

    \red{Questa frase qua sopra implica che una equazione differenziale non possa esseer lineare, cosa che chiaramente è falsa (così mi pare, google così dice), quindi riformularla e spiegarla meglio}.

    \begin{figure}[h]
      \centering
      \includegraphics[width=0.9\linewidth]{./images/ctmc7.png}
      \caption{Sistema a più stati.}
    \end{figure}

    Dove P è la matrice di transizione. Si può, inoltre, usare la matrice \textbf{A}  per il calcolo della distribuzione limite:

    \begin{figure}[!h]
      \centering
      \includegraphics[width=0.9\linewidth]{./images/ctmc8.png}
      \caption{Distribuzione limite del sistema a più stati.}
    \end{figure}

    Dove $\bold{A}=(\bold{P}-\bold{I})/dt$ è la matrice dei tassi di transizione, chiamata anche \textbf{matrice generatrice infinitesimale}.

    \begin{figure}[!h]
      \centering
      \includegraphics[width=0.6\linewidth]{./images/ctmc9.png}
      \caption{Definizione di A.}
    \end{figure}
  
    Per le \textbf{CTMC il tempo di soggiorno} in uno stato (funzionante o guasto) è una variabile aleatoria \textbf{Esponenziale con parametro} $\lambda$ per $T_G$ e $\mu$ per $T_R$. Questo risultato è ottenibile dal \textbf{calcolo della probabilità di essere in uno stato $i$},

    \begin{figure}[!h]
      \centering
      \includegraphics[width=0.6\linewidth]{./images/ctmc10.png}
      \caption{???.}
    \end{figure}

    \red{Questa formula è il calcolo della probabilità di essere in uno stato i? O.O Spiegare molto meglio questa formula, termine per termine e poi tutta assieme.}

    Dove $T_G$ è il tempo di soggiorno nello stato 1 (funzionante), quindi $T_G$ è il tempo al guasto. Consideriamo un intervallo di tempo $(0,w)$ diviso in $m$ intervalli di tempo $\Delta$ abbastanza piccoli da poter approssimare una CTMC ad una DTMC.

    $$\Pr{\{w<T_G\le w+\Delta\}} \cong \Pr{\{T_G=(m+1)\Delta\}} = (1-q_{12}\Delta)^mq_{12}\Delta$$

    \red{Spiegare le formule uagliu, tipo qua dire "la probabilità che il tempo al guasto sia compreso nell'intervallo elementare a partire da un certo istante di tempo w è data da..."}

    Considerando $\Delta=w/m$ e osservando che $\Delta \to 0$ implica $m\to\infty$ e che $q_{12}\equiv\lambda$, si ha

    \red{Spiegare quell' "implica"}.

    \begin{figure}[!h]
      \centering
      \includegraphics[width=0.9\linewidth]{./images/ctmc12.png}
      \caption{???.}
    \end{figure}

    \red{Qui ad esempio non c'è bisogno di spiegare perché si sarà già spiegato prima la semantica dell'equazione e del risultato.}

    Il tempo di soggiorno nello stato di funzionamento corrisponde al MTTF, mentre quello nello stato di riparazione corrisponde al MTTR.
    $$MTTF=E[T_G]=1/\lambda$$
    $$MTTR=E[T_R]=1/\mu$$

    \red{Perché corrispondono, chi me lo dice? E se ci sono dimostrazioni è meglio metterle.}

  \subsubsection{Pro}
    \begin{itemize}
      \item \textbf{Modellazione dinamica}: le catene Markoviane catturano efficacemente le dinamiche evolutive del sistema. \red{Sembra na supercazzola, spiegare meglio cosa si intende.}
      \item \textbf{Rappresentazione semplice}: le catene Markoviane sono facilmente rappresentabili attraverso il diagramma dello spazio degli stati.
    \end{itemize}
  \subsubsection{Contro}
    \begin{itemize}
      \item \textbf{Complessità crescente}: la complessità aumenta con il numero di stati e le transizioni da modellare.
      \item \textbf{Approccio monolitico}: questo tipo di approccio porta ad una esplosione degli stati per sistemi del mondo reale. \red{Spiegare meglio questo concetto.}
    \end{itemize}


\subsection{Reti di Petri Stocastiche}
  Le reti di Petri stocastiche sono un'estensione delle reti di Petri tradizionali, integrate con \textbf{aspetti probabilistici}. Sono utilizzate per modellare sistemi in cui la disponibilità è influenzata da fattori casuali.

  Una Petri Network è un grafo diretto bipartito i cui nodi sono divisi in due insiemi disgiunti chiamati posti e transizioni collegati da archi. Un posto può contenere uno o più token che specificano una determinata "condizione" in cui si trova il sistema. Una \textbf{marcatura di una PN è un vettore che elenca il numero di token nelle posizioni della PN}. L'attivazione di una transizione è un'azione atomica in cui un token viene rimosso da ogni punto di input della transizione e \textbf{un token viene aggiunto a ciascun punto di output della transizione}, con il risultato di una nuova marcatura della PN. A differenza delle PN classiche, le Stochastic Perti Network incorporano un meccanismo di temporizzazione stocastica associato alle transizioni.

  Formalmente \textbf{una SPN è una sestupla} (P, T, I, O, M, L):
  \begin{itemize}
    \item \textbf{P} è l'insieme di np posti. \red{np??}
    \item \textbf{T} è l'insieme di nt transizioni. \red{nt??}
    \item \textbf{I} sono le relazioni di transizioni di input. 
    \item \textbf{O} sono le relazioni di transizioni di output.
    \item \textbf{M} è la marcatura iniziale.
    \item \textbf{L} è l’insieme di N numeri reali non negativi che rappresentano le \textbf{frequenze di attivazione delle variabili casuali distribuite in modo esponenziale} associate a ciascuna transizione PN. \red{Porla in maniera un poco piu chiara, tipo "dal momento che ad ogni transizione è associata una variabile casuale distribuita esponenzialmente, ad ogni v.a è associata una frequenza di attivazione, OVVERO (e si spiega cosa è una frequenza di attivazione)}
  \end{itemize}
    \subsubsection{Tipologie e caratteristiche}
      Se una PN ha transizioni sia temporizzate che immediate si parla di Generalized SPN (GSPN); le \textbf{transizioni immediate} sono utili per modellare il verificarsi di quegli eventi che obbediscono a una certa logica. Se una marcatura è abilitata da una transizione \textbf{immediata} è detta \textbf{vanishing} altrimenti è detta \textbf{tangible}.

      \red{Cosa è una transizione temporizzata? E cosa è una immediata? Non si è detto.}
      \red{Stanto a quanto detto, sembra che si voglia dire che le transizioni non immediate non sono utili per modellare eventi che seguono una logica. }
      \red{Cosa vuol dire abilitare una transizione? Se si usa un verbo diverso bisogna spiegarlo.}

      Per il calcolo dell’affidabilità bisogna usare un’ulteriore evoluzione delle PN, ovvero le Stochastic Reward Network, dove sono \textbf{aggiunte componenti} alla rete quali \textbf{funzioni di guardia}, \textbf{cardinalità variabile di un arco}, \textbf{dipendenza di una marcatura} e ad ogni \textbf{marcatura tangible è associata un valore di una funzione di reward}, un esempio è

      \red{1. Cosa è una funzione di guarda? 2. Cosa è la cardinalità variabile di un arco? 3. Che significa la "dipendenza di una marcatura"? Quale, e da chi?}

      $$X(t) =
      \begin{cases}
          1 & \text{se il sistema è funzionante} \\
          0 & \text{altrimenti}
      \end{cases}$$

      L’affidabilità è calcolata come il valore atteso del reward per tempo infinito:
      \red{Cosa è questo ente metafisico indefinito chiamato "reward"?? Si mangia??}
      $$E[X]=\sum _i r_i\pi_i$$

      dove $r_i$ è il reward della marcatura $i$ e $\pi_i$ è la probabilità a \textbf{Steady State} di trovarsi nella marcatura $i$.

      Di seguito degli esempi di Reti di Petri e di loro rappresentazioni:

      \begin{figure}[!h]
        \centering
        \includegraphics[width=0.3\linewidth]{./images/pn1.png}
        \caption{Rete di Petri.}
      \end{figure}

      \begin{figure}[!h]
        \centering
        \includegraphics[width=0.5\linewidth]{./images/pn2.png}
        \caption{Rete di Petri stocastica (presenza di tasso di fallimento associato a marcatura).}
      \end{figure}

      \red{Se le reti di petri non c'è bisogno di spiegarle in quanto non parte del corso, qua però bisogna spiegare che vuol dire quel \#up, non lo si può mica buttare così e chi si è visto si è visto... bisogna spiegare le foto che si mettono, pure le virgole vanno giustificate.}

      \begin{figure}[!h]
        \centering
        \includegraphics[width=0.5\linewidth]{./images/pn3.png}
        \caption{Esempio completo di Rete di Petri Stocastica.}
      \end{figure}

      \begin{figure}[!h]
        \centering
        \includegraphics[width=0.5\linewidth]{./images/pn4.png}
        \caption{Rete di Reward Stocastica con funzione di Reward.}
      \end{figure}
      
      \red{Qua ci sta una grande domanda per qualcosa di assolutamente non detto: io qua vedo di nuovo \#up, e pure prima ci stava \#up, e perché questa qua si chiama REWARD NET e quella di prima no? Questa è quasi una domanda d'esame proprio. }

    \subsubsection{Pro}
      \begin{itemize}
        \item \textbf{Modellazione avanzata}: le reti di Petri stocastiche e le SRN consentono una modellazione avanzata di sistemi complessi.
        \item \textbf{Interfaccia ad alto livello}: le reti di Petri forniscono una interfaccia ad alto livello che nasconde i dettagli tecnici.
        \item \textbf{Virtualizzazione negli stati}: una PN, anche semplice, può rappresentare moltissimi stati a seconda del numero di possibili marcature, cosa che avrebbe reso impraticabile l’utilizzo delle catene markoviane, la quale avrebbe sofferto di un’esplosione degli stati.
        \red{A cosa è dovuta questa differenza? A un motivo puramente grafico, visivo?}
      \end{itemize}
    \subsubsection{Contro}
      \begin{itemize}
        \item \textbf{Complessità computazionale}: la valutazione può richiedere risorse computazionali significative.
        \item \textbf{Difficoltà di approfondiment}o: si ha difficoltà ad accedere alla distribuzione sottostante degli stati. \red{Spiegare meglio.}
        \item \textbf{Complessità negli stati}: difficoltà ad accedere alla distribuzione dello stato sottostante, estrarre il grafo di raggiungibilità da una PN, anche semplice, può portare alla creazione di tantissimi stati a seconda del numero di possibili marcature.
        \item \textbf{Interpretazione complessa}: l'interpretazione dei risultati può essere più complessa rispetto a modelli più semplici.
      \end{itemize}
